(function(e){function t(t){for(var r,a,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],r=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var r={},n={app:0},s=[];function a(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=r,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var r=i("85ec"),n=i.n(r);n.a},"09a1":function(e,t,i){},"2d0a":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("nav-bar"),i("v-content",[i("router-view")],1)],1)},s=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app-bar",{staticClass:"mb-5",attrs:{fixed:"",app:""}},[e.$vuetify.breakpoint.md||e.$vuetify.breakpoint.lg||e.$vuetify.breakpoint.xl?i("v-toolbar-title",[i("router-link",{attrs:{tag:"span",to:"/"}},[i("v-icon",{staticClass:"home"},[e._v("mdi-home")])],1)],1):e._e(),e.$vuetify.breakpoint.md||e.$vuetify.breakpoint.lg||e.$vuetify.breakpoint.xl?i("v-spacer"):e._e(),e.$store.state.isUserLoggedIn?i("v-toolbar-items",{attrs:{dense:""}},[i("v-btn",{attrs:{small:e.$vuetify.breakpoint.sm||e.$vuetify.breakpoint.xs,text:"",to:"/unos-racuna"}},[e._v("Unos Računa")]),i("v-btn",{attrs:{small:e.$vuetify.breakpoint.sm||e.$vuetify.breakpoint.xs,text:"",to:"/moji-racuni"}},[e._v("Moji računi")]),e.$vuetify.breakpoint.sm||e.$vuetify.breakpoint.xs?i("v-btn",{attrs:{small:e.$vuetify.breakpoint.sm||e.$vuetify.breakpoint.xs,text:""},on:{click:e.logout}},[e._v("Odjava")]):e._e()],1):e._e(),e.$vuetify.breakpoint.md||e.$vuetify.breakpoint.lg||e.$vuetify.breakpoint.xl?i("v-spacer"):e._e(),i("v-toolbar-items",[e.$store.state.isUserLoggedIn?e._e():i("v-btn",{attrs:{text:"",to:"/prijava"}},[e._v(" Prijava ")]),e.$store.state.isUserLoggedIn?e._e():i("v-btn",{attrs:{text:"",to:"/registracija"}},[e._v(" Registracija ")]),e.$store.state.isUserLoggedIn?i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.md||e.$vuetify.breakpoint.lg||e.$vuetify.breakpoint.xl,expression:"$vuetify.breakpoint.md || $vuetify.breakpoint.lg || $vuetify.breakpoint.xl"}],attrs:{text:""},on:{click:e.logout}},[e._v(" Odjava ")]):e._e()],1)],1)},o=[],l={methods:{logout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"login-form"})}}},c=l,u=(i("dd70"),i("2877")),d=Object(u["a"])(c,a,o,!1,null,"485a32eb",null),p=d.exports,v={components:{NavBar:p}},m=v,b=(i("034f"),Object(u["a"])(m,n,s,!1,null,null,null)),f=b.exports,h=i("8c4f"),y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-container",[i("v-flex",[i("v-row",{attrs:{"no-gutters":""}},e._l(e.actions,(function(t){return i("v-col",{key:t.name,attrs:{cols:"12",sm:"4"}},[i("v-card",{staticClass:"pa-2",attrs:{height:e.isAnyInputActive?"100px":"200px",hover:"",tile:"","align-center":""},on:{click:t.method}},[i("v-card-title",{staticClass:"action-title justify-center",attrs:{"primary-title":""}},[e._v(" "+e._s(t.name)+" ")]),e.isAnyInputActive?e._e():i("div",{staticClass:"input-icon"},[i("v-icon",[e._v(e._s(t.icon))])],1)],1)],1)})),1),e.errors.length?i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-alert",{staticClass:"mt-5",attrs:{"justify-center":"",dense:"",outlined:"",type:"error",value:e.errors.length}},e._l(e.errors,(function(t){return i("span",{key:t},[e._v(e._s(t))])})),0)],1):e._e()],1),i("v-overlay",{attrs:{value:e.billLoaded,color:"success"}},[i("h1",[e._v("Račun učitan")])]),i("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.isScanActive,expression:"isScanActive"}]},[i("v-container",{staticClass:"mt-5 form",attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{directives:[{name:"show",rawName:"v-show",value:!!e.barcodeScanner,expression:"!!barcodeScanner"}],attrs:{row:"",wrap:"",id:"div-video-container"}},[i("v-btn",{staticClass:"mb-4",on:{click:e.hideScanner}},[e._v("Sakrij")]),e.barcodeScanner?i("month-picker",{on:{periodChosen:e.setPeriod}}):e._e(),i("video",{staticClass:"dbrScanner-video",attrs:{playsinline:"true"}})],1)],1)],1),e.isUploadActive?i("v-flex",[i("v-container",{staticClass:"mt-5 form",attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("month-picker",{on:{periodChosen:e.setPeriod}}),i("v-file-input",{attrs:{multiple:"","small-chips":"",id:"iptDecodeImg",accept:"image/bmp,image/jpeg,image/png,image/gif",label:"Unos datoteka..."},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),i("v-btn",{attrs:{"max-width":"200px"},on:{click:e.scanFiles}},[e._v(" Skeniraj datoteke ")])],1)],1)],1):e._e(),e.isFormActive?i("BillForm",{staticClass:"form",on:{billInput:e.addBill}}):e._e(),e.bills.length?i("v-container",{staticClass:"mt-5",attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{staticClass:"form",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",md9:""}},[i("h1",[e._v("Uneseni računi")])]),i("v-flex",{attrs:{xs12:"",md3:""}},[i("v-btn",{on:{click:e.saveBills}},[i("v-icon",[e._v("mdi-content-save")]),e._v("Pohrani račune")],1)],1),e.saveBillErrors.length?i("v-flex",{attrs:{xs12:"","justify-center":"","align-center":""}},[i("v-alert",{staticClass:"mt-5",attrs:{"justify-center":"",dense:"",outlined:"",type:"error",value:!!e.saveBillErrors.length}},e._l(e.saveBillErrors,(function(t){return i("span",{key:t},[e._v(e._s(t))])})),0)],1):e._e(),e.successAlerts.length?i("v-flex",{attrs:{xs12:"","justify-center":"","align-center":""}},[i("v-alert",{staticClass:"mt-5",attrs:{"justify-center":"",dense:"",outlined:"",type:"success",value:!!e.successAlerts.length}},e._l(e.successAlerts,(function(t){return i("span",{key:t},[e._v(e._s(t))])})),0)],1):e._e(),e._l(e.bills,(function(t){return i("v-flex",{key:t.billNumber,attrs:{xs12:"",md4:""}},[i("BillCard",{attrs:{bill:t},on:{editing:e.setEditing,removeBill:e.removeBill}})],1)}))],2)],1):e._e()],1)],1)},x=[],g=(i("a4d3"),i("e01a"),i("d28b"),i("4de4"),i("c740"),i("4160"),i("a15b"),i("a434"),i("a9e3"),i("e439"),i("dbb4"),i("b64b"),i("d3b7"),i("4d63"),i("ac1f"),i("25f0"),i("3ca3"),i("1276"),i("159b"),i("ddb0"),i("ade3")),k=(i("96cf"),i("1da1")),_=i("2909"),w=i("e141"),j=i.n(w),P=i("2f62"),$=i("bc3a"),C=i.n($),O=i("0e44");r["default"].use(P["a"]);var S=new P["a"].Store({strict:!0,plugins:[Object(O["a"])()],state:{token:null,user:null,isUserLoggedIn:!1},mutations:{setToken:function(e,t){e.token=t,e.isUserLoggedIn=!!t},setUser:function(e,t){e.user=t}},actions:{setToken:function(e,t){var i=e.commit;i("setToken",t)},setUser:function(e,t){var i=e.commit;i("setUser",t)}},getters:{isUserLoggedIn:function(e){return e.isUserLoggedIn},user:function(e){return e.user},token:function(e){return e.token}}}),R=function(){return C.a.create({baseURL:"/",headers:{Authorization:"Bearer ".concat(S.getters.token)}})},A={list:function(){return R().get("bills/list")},new:function(e){return R().post("bills/new",e)},remove:function(e){return R().delete("bills/remove",{params:{billNumber:e}})},edit:function(e){return R().put("bills/edit",e)}},B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-container",{staticClass:"mt-5",attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h1",[e._v("Podaci o računu")])]),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Ime i prezime platitelja",outlined:"",required:"",rules:e.requiredRules},model:{value:e.payer.name,callback:function(t){e.$set(e.payer,"name",t)},expression:"payer.name"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-map-marker",label:"Ulica",outlined:"",required:"",rules:e.requiredRules},model:{value:e.payer.street,callback:function(t){e.$set(e.payer,"street",t)},expression:"payer.street"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-city",label:"Mjesto",outlined:"",required:"",rules:e.requiredRules},model:{value:e.payer.city,callback:function(t){e.$set(e.payer,"city",t)},expression:"payer.city"}}),i("MonthPicker",{on:{periodChosen:e.setPeriod}}),i("v-checkbox",{attrs:{label:"Račun je plaćen"},model:{value:e.isPaidFor,callback:function(t){e.isPaidFor=t},expression:"isPaidFor"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-counter",label:"Poziv na broj primatelja",outlined:"",required:"",rules:e.requiredRules},model:{value:e.billNumber,callback:function(t){e.billNumber=t},expression:"billNumber"}}),i("v-text-field",{attrs:{rules:e.numberRules.concat(e.requiredRules),"prepend-icon":"mdi-account-cash",label:"Cijena",suffix:"KN",outlined:"",required:""},model:{value:e.cost,callback:function(t){e.cost=t},expression:"cost"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-format-list-checks",label:"Tip računa",outlined:"",required:"",rules:e.requiredRules},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-message-text-outline",label:"Opis računa",outlined:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),i("v-flex",{attrs:{xs12:""}},[i("v-btn",{attrs:{disabled:!e.valid},on:{click:e.saveBill}},[e._v(" Dodaj ")])],1),i("v-alert",{staticClass:"mt-5",attrs:{dense:"",outlined:"",type:"error",value:!!e.error}},[i("div",{domProps:{innerHTML:e._s(e.error)}})])],1)],1)],1)},U=[],E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.period,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.period=t},"update:return-value":function(t){e.period=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[i("v-text-field",e._g({attrs:{label:"Razdoblje","prepend-icon":"mdi-calendar",readonly:"",outlined:""},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}},r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[i("v-date-picker",{attrs:{type:"month","no-title":"",scrollable:""},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Odustani")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.$refs.menu.save(e.period),e.emitPeriod()}}},[e._v("OK")])],1)],1)},T=[],N={data:function(){return{menu:!1,period:(new Date).toISOString().substr(0,7)}},created:function(){this.emitPeriod()},methods:{emitPeriod:function(){this.$emit("periodChosen",{period:this.period})}}},I=N,F=Object(u["a"])(I,E,T,!1,null,null,null),q=F.exports,L={components:{MonthPicker:q},data:function(){return{cost:"",payer:{name:"",street:"",city:""},billNumber:"",description:"",isPaidFor:!1,month:"",year:"",error:"",numberRules:[function(e){return!!Number(e)||"Uneseni podatak mora biti broj (decimalni dio odvojen točkom)"}],requiredRules:[function(e){return!!e||"Ispunite označeno polje"}],valid:!0}},methods:{setPeriod:function(e){var t=e.period.split("-"),i=Object(_["a"])(t);this.year=i[0],this.month=i[1]},saveBill:function(){var e={cost:Number(this.cost),payer:this.payer,billNumber:this.billNumber,description:this.description,isPaidFor:this.isPaidFor,month:Number(this.month),year:Number(this.year),type:this.type};this.$emit("billInput",{bill:e}),Object.assign(this.$data,this.$options.data.apply(this))},getBillType:function(e){for(var t={"^[0-9]{9}-[0-9]{6}$":"VIP internet","^[0-9]{2}-[0-9]{6}-[0-9]{4}$":"UNIKOM","^[0-9]{11}-[0-9]{4}-[0-9]{1}$":"HEP Toplinarstvo","^[0-9]{6}-[0-9]{6}-[0-9]{3}$":"Pričuva","^[0-9]{10}-[0-9]{6}-[0-9]{1}$":"HEP Struja","^[0-9]{6}$":"Vodovod Osijek","^[0-9]{11}-[0-9]{5}$":"Vodovod Osijek","^[0-9]{4}-[0-9]{6}-[0-9]{7}$":"Komunalna naknada"},i=[],r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];i.push(new RegExp(s))}for(var a=0,o=i;a<o.length;a++){var l=o[a];if(l.test(e))return t[l.source]}return"Nepoznat"}},computed:{type:function(){return this.getBillType(this.billNumber)}}},z=L,M=Object(u["a"])(z,B,U,!1,null,null,null),D=M.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",{staticClass:"d-inline-block mx-auto"},[i("v-container",[i("v-row",{attrs:{justify:"space-between"}},[i("v-col",{attrs:{cols:"auto"}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"red"},on:{click:e.removeBill}},[e._v("mdi-close-circle-outline")])],1),e.editMode?e._e():i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"blue"},on:{click:function(t){e.toggleEdit(),e.emitEditingEvent()}}},[e._v("mdi-pencil")])],1),e.editMode?i("v-btn",{attrs:{icon:"",disabled:!e.valid}},[i("v-icon",{attrs:{color:"green"},on:{click:function(t){e.toggleEdit(),e.emitEditingEvent()}}},[e._v("mdi-check")])],1):e._e(),e.editMode?e._e():i("BillCardRead",{attrs:{bill:e.bill}}),e.editMode?i("BillCardEdit",{attrs:{bill:e.bill},on:{isValidInput:e.isValidInput}}):e._e(),i("v-card-text",[i("v-checkbox",{attrs:{label:"Račun je plaćen"},model:{value:e.bill.isPaidFor,callback:function(t){e.$set(e.bill,"isPaidFor",t)},expression:"bill.isPaidFor"}})],1)],1)],1)],1)],1)},K=[],H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-card-title",{staticClass:"title"},[e._v(" "+e._s(e.bill.payer.name)+" "),i("br"),e._v(" "+e._s(e.bill.type)+" ")]),i("v-card-text",[i("b",[e._v("Cijena:")]),e._v(" "+e._s(e.bill.cost)+" kn ")]),i("v-card-text",[i("b",[e._v("Opis:")]),e._v(" "+e._s(e.bill.description)+" "),i("br"),i("b",[e._v("Adresa:")]),e._v(" "+e._s(e.bill.payer.city)+", "+e._s(e.bill.payer.street)+" "),i("br"),i("b",[e._v("Razdoblje:")]),e._v(" "+e._s(e.bill.month)+" / "+e._s(e.bill.year)+" "),i("br"),i("b",[e._v("Poziv na broj:")]),e._v(" "+e._s(e.bill.billNumber)+" ")])],1)},J=[],Z={props:["bill"]},G=Z,Q=Object(u["a"])(G,H,J,!1,null,null,null),W=Q.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Ime i prezime platitelja",required:"",rules:e.requiredRules},on:{keyup:e.emitValidState},model:{value:e.bill.payer.name,callback:function(t){e.$set(e.bill.payer,"name",t)},expression:"bill.payer.name"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-format-list-checks",label:"Tip računa",required:"",rules:e.requiredRules},on:{keyup:e.emitValidState},model:{value:e.bill.type,callback:function(t){e.$set(e.bill,"type",t)},expression:"bill.type"}}),i("v-text-field",{attrs:{rules:e.numberRules.concat(e.requiredRules),"prepend-icon":"mdi-account-cash",label:"Cijena",suffix:"KN",required:""},on:{keyup:e.emitValidState},model:{value:e.bill.cost,callback:function(t){e.$set(e.bill,"cost",t)},expression:"bill.cost"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-message-text-outline",label:"Opis računa"},on:{keyup:e.emitValidState},model:{value:e.bill.description,callback:function(t){e.$set(e.bill,"description",t)},expression:"bill.description"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-city",label:"Mjesto",required:"",rules:e.requiredRules},on:{keyup:e.emitValidState},model:{value:e.bill.payer.city,callback:function(t){e.$set(e.bill.payer,"city",t)},expression:"bill.payer.city"}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-map-marker",label:"Ulica",required:"",rules:e.requiredRules},on:{keyup:e.emitValidState},model:{value:e.bill.payer.street,callback:function(t){e.$set(e.bill.payer,"street",t)},expression:"bill.payer.street"}}),i("MonthPicker",{on:{periodChosen:e.setPeriod}}),i("v-text-field",{attrs:{"prepend-icon":"mdi-counter",label:"Poziv na broj primatelja",required:"",rules:e.requiredRules},on:{keyup:e.emitValidState},model:{value:e.bill.billNumber,callback:function(t){e.$set(e.bill,"billNumber",t)},expression:"bill.billNumber"}})],1)],1)},Y=[],ee={data:function(){return{valid:!0,numberRules:[function(e){return!!Number(e)||"Uneseni podatak mora biti broj (decimalni dio odvojen točkom)"}],requiredRules:[function(e){return!!e||"Ispunite označeno polje"}]}},props:["bill"],components:{MonthPicker:q},methods:{setPeriod:function(e){var t=e.period.split("-"),i=Object(_["a"])(t);this.bill.year=i[0],this.bill.month=i[1]},emitValidState:function(){this.$emit("isValidInput",{valid:this.valid})}}},te=ee,ie=Object(u["a"])(te,X,Y,!1,null,null,null),re=ie.exports,ne={data:function(){return{editMode:!1,valid:!0}},props:["bill"],components:{BillCardRead:W,BillCardEdit:re},methods:{emitEditingEvent:function(){this.$emit("editing",{editing:this.editMode})},isValidInput:function(e){var t=e.valid;this.valid=t},removeBill:function(){this.$emit("removeBill",{bill:this.bill})},toggleEdit:function(){this.editMode=!this.editMode}}},se=ne,ae=(i("9de9"),Object(u["a"])(se,V,K,!1,null,"32a4d3d6",null)),oe=ae.exports;function le(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function ce(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?le(Object(i),!0).forEach((function(t){Object(g["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):le(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ue={components:{BillForm:D,MonthPicker:q,BillCard:oe},data:function(){return{actions:[{name:"Unesi račun",method:this.showForm,icon:"mdi-pencil-plus"},{name:"Skeniraj račun",method:this.showScanner,icon:"mdi-barcode-scan"},{name:"Prenesi slike",method:this.showUpload,icon:"mdi-image-multiple"}],bills:[],barcodeScanner:null,files:[],errors:[],isFormActive:!1,isScanActive:!1,isUploadActive:!1,year:"",month:"",editing:!1,saveBillErrors:[],successAlerts:[],billLoaded:!1}},methods:{setEditing:function(e){var t=e.editing;this.editing=t},setPeriod:function(e){var t=e.period.split("-"),i=Object(_["a"])(t);this.year=i[0],this.month=i[1]},removeBill:function(e){var t=e.bill;this.bills.splice(this.bills.findIndex((function(e){return e.billNumber===t.billNumber})),1)},addBill:function(e){var t=this,i=e.bill;this.bills.push(i),this.billLoaded=!0,setTimeout((function(){t.billLoaded=!1}),1200),this.showForm()},showForm:function(){this.isFormActive=!this.isFormActive,!0===this.isScanActive&&(this.hideScanner(),this.isScanActive=!1),this.isScanActive=!1,this.isUploadActive=!1},showUpload:function(){this.isUploadActive=!this.isUploadActive,this.isFormActive=!1,!0===this.isScanActive&&(this.hideScanner(),this.isScanActive=!1)},showScanner:function(){var e=this;if(this.isFormActive=!1,!0===this.isScanActive)return this.hideScanner(),void(this.isScanActive=!1);this.isScanActive=!0,this.isUploadActive=!1,j.a.BarcodeScanner.createInstance({UIElement:document.getElementById("div-video-container"),onUnduplicatedRead:function(t){e.parseResult(t),e.billLoaded=!0,setTimeout((function(){e.billLoaded=!1}),1200)}}).then((function(t){e.barcodeScanner=t,e.barcodeScanner.show().catch((function(t){e.errors.push(t.message||t),e.barcodeScanner.hide()}))}))},hideScanner:function(){this.barcodeScanner.hide(),this.barcodeScanner=null,this.isScanActive=!1},parseResult:function(e){var t=e.split("\n"),i=t[2].split("");i.splice(-2,0,".");var r=t[5].split(" ");r.shift();var n=r.join(" "),s={cost:Number(i.join("")),payer:{name:t[3],street:t[4],city:n},month:Number(this.month),year:Number(this.year),billNumber:t[11],description:t[13],isPaidFor:!1,type:this.getBillType(t[11])};this.bills.push(s)},getBillType:function(e){for(var t={"^[0-9]{9}-[0-9]{6}$":"VIP internet","^[0-9]{2}-[0-9]{6}-[0-9]{4}$":"UNIKOM","^[0-9]{11}-[0-9]{4}-[0-9]{1}$":"HEP Toplinarstvo","^[0-9]{6}-[0-9]{6}-[0-9]{3}$":"Pričuva","^[0-9]{10}-[0-9]{6}-[0-9]{1}$":"HEP Struja","^[0-9]{6}$":"Vodovod Osijek","^[0-9]{11}-[0-9]{5}$":"Vodovod Osijek","^[0-9]{4}-[0-9]{6}-[0-9]{7}$":"Komunalna naknada"},i=[],r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];i.push(new RegExp(s))}for(var a=0,o=i;a<o.length;a++){var l=o[a];if(l.test(e))return t[l.source]}return"Nepoznat"},scanFiles:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i,r,n,s,a,o,l,c,u,d,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.a.BarcodeReader.createInstance();case 2:t=e.sent,i=!0,r=!1,n=void 0,e.prev=6,s=this.files[Symbol.iterator]();case 8:if(i=(a=s.next()).done){e.next=17;break}return o=a.value,e.next=12,t.decode(o);case 12:if(l=e.sent,l.length>0){for(c=[],u=0;u<l.length;u+=1)c.push(l[u].BarcodeText);d=c.join(""),this.parseResult(d)}else this.errors.push("Barkod nije pronađen.");case 14:i=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](6),r=!0,n=e.t0;case 23:e.prev=23,e.prev=24,i||null==s.return||s.return();case 26:if(e.prev=26,!r){e.next=29;break}throw n;case 29:return e.finish(26);case 30:return e.finish(23);case 31:this.billLoaded=!0,setTimeout((function(){p.billLoaded=!1}),1200),this.files=[];case 34:case"end":return e.stop()}}),e,this,[[6,19,23,31],[24,,26,30]])})));function t(){return e.apply(this,arguments)}return t}(),saveBills:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.editing){e.next=4;break}this.saveBillErrors.push("Prije pohrane podataka spremite sve račune i izađite iz načina uređivanja."),e.next=15;break;case 4:return e.prev=4,this.saveBillErrors=[],this.successAlerts=[],e.next=9,A.new(this.bills);case 9:this.successAlerts.push("Računi uspješno spremljeni."),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),this.saveBillErrors.push(e.t0.response.data.error);case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(){return e.apply(this,arguments)}return t}()},computed:ce({isAnyInputActive:function(){return this.isFormActive||this.isScanActive||this.isUploadActive}},Object(P["b"])(["isUserLoggedIn","user"])),beforeDestroy:function(){this.barcodeScanner&&this.hideScanner()}},de=ue,pe=(i("bf2a"),Object(u["a"])(de,y,x,!1,null,"6e2631f3",null)),ve=pe.exports,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-container",{staticClass:"form mt-9 mb-9"},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-select",{attrs:{items:e.cities,label:"1. Odaberite mjesto",clearable:""},on:{change:e.changeCity}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-select",{attrs:{items:e.timePeriods,label:"2. Odaberite vremensko razdoblje",clearable:""},on:{change:e.changePeriod}})],1),i("v-flex",{attrs:{xs12:""}},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.selectedBills,"item-key":"name","hide-default-footer":""},scopedSlots:e._u([{key:"item.isPaidFor",fn:function(t){var r=t.item;return[i("v-checkbox",{on:{change:e.calculateSums},model:{value:r.isPaidFor,callback:function(t){e.$set(r,"isPaidFor",t)},expression:"item.isPaidFor"}})]}},{key:"item.action",fn:function(t){var r=t.item;return[i("v-icon",{attrs:{small:""},on:{click:function(t){return e.showDialog(r)}}},[e._v(" mdi-delete ")])]}},{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[e.selectedTimePeriod?i("v-toolbar-title",[e._v(" "+e._s(e.selectedTimePeriod)+" ")]):e.selectedTimePeriod&&e.selectedCity?i("v-toolbar-title",[e._v(" "+e._s(e.selectedTimePeriod)+" - "+e._s(e.selectedCity)+" ")]):i("v-toolbar-title",[e._v(" Svi računi ")]),i("v-spacer"),e.successAlert?i("v-toolbar-title",[i("v-alert",{staticClass:"mt-5",attrs:{"justify-center":"",dismissible:"",dense:"",outlined:"",type:"success",value:!!e.successAlert}},[i("span",[e._v(e._s(e.successAlert))])])],1):e._e(),e.errorAlert?i("v-toolbar-title",[i("v-alert",{staticClass:"mt-5",attrs:{"justify-center":"",dismissible:"",dense:"",outlined:"",type:"error",value:!!e.errorAlert}},[i("span",[e._v(e._s(e.errorAlert))])])],1):e._e(),i("v-spacer"),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("Jeste li sigurni da želite obrisati račun?")])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.removeBill}},[e._v("DA")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("NE")])],1)],1)],1),i("v-btn",{staticClass:"mb-2",attrs:{color:"#c5e1a5"},on:{click:e.saveToDb}},[i("v-icon",[e._v("mdi-content-save")]),e._v("Spremi promjene ")],1)],1)]},proxy:!0},{key:"item.type",fn:function(t){var r=t.item;return[i("v-chip",{attrs:{color:e.getColor(r.isPaidFor)}},[e._v(e._s(r.type))])]}},{key:"body.append",fn:function(t){var r=t.headers;return[i("tr",{staticClass:"highlight-to-pay"},[i("td",{attrs:{colspan:r.length,align:"right"}},[e._v(" PREOSTALO ZA PLATITI: "),i("b",[e._v(e._s(e.sumToPay))]),e._v(" kn ")])]),i("tr",{staticClass:"highlight-paid"},[i("td",{attrs:{colspan:r.length,align:"right"}},[e._v(" PLAĆENO: "),i("b",[e._v(e._s(e.sumPaid))]),e._v(" kn ")])])]}}])})],1)],1)],1)},be=[],fe=(i("d81d"),i("13d5"),{data:function(){return{dialog:!1,billToDelete:{},selectedTimePeriod:"",selectedCity:"",timePeriods:[],cities:[],selectedBills:[],sumToPay:"",sumPaid:"",bills:[],successAlert:"",errorAlert:"",headers:[{text:"Platitelj",align:"left",sortable:!1,value:"payer.name"},{text:"Mjesto",value:"payer.city"},{text:"Ulica",value:"payer.street"},{text:"Tip računa",value:"type"},{text:"Poziv na broj",value:"billNumber"},{text:"Cijena (kn)",value:"cost"},{text:"Razdoblje",value:"period"},{text:"Plaćen",value:"isPaidFor",sortable:!1},{text:"Radnje",value:"action",sortable:!1}]}},mounted:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A.list();case 2:this.bills=e.sent.data.bills,this.selectedBills=this.bills,this.timePeriods=this.bills.map((function(e){return e.period})),this.cities=this.bills.map((function(e){return e.payer.city.toUpperCase()})),this.calculateSums();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{changeCity:function(e){this.selectedBills=e?this.bills.filter((function(t){return t.payer.city.toUpperCase()===e.toUpperCase()})):this.bills,this.selectedCity=e,this.calculateSums()},changePeriod:function(e){var t=this;e&&this.selectedCity?this.selectedBills=this.bills.filter((function(i){return i.period===e&&i.payer.city.toUpperCase()===t.selectedCity})):e?this.selectedBills=this.bills.filter((function(t){return t.period===e})):this.selectedCity&&!e?this.selectedBills=this.bills.filter((function(e){return e.payer.city.toUpperCase()===t.selectedCity.toUpperCase()})):this.selectedBills=this.bills,this.selectedTimePeriod=e,this.calculateSums()},getColor:function(e){return e?"#c5e1a5":"#f9a825"},calculateSums:function(){this.sumToPay=this.selectedBills.reduce((function(e,t){return t.isPaidFor?e:e+t.cost}),0),this.sumPaid=this.selectedBills.reduce((function(e,t){return t.isPaidFor?e+t.cost:e}),0)},showDialog:function(e){this.billToDelete=e,this.dialog=!0},removeBill:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.remove(this.billToDelete.billNumber);case 3:this.bills=this.bills.filter((function(e){return e.billNumber!==t.billToDelete.billNumber})),this.selectedBills=this.selectedBills.filter((function(e){return e.billNumber!==t.billToDelete.billNumber})),this.calculateSums(),this.billToDelete={},this.close(),this.successAlert="",this.successAlert="Račun uspješno obrisan.",e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),this.errorAlert="",this.errorAlert=e.t0.response.data.error;case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),saveToDb:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.successAlert="",e.next=4,A.edit(this.bills);case 4:this.successAlert="Promjene uspješno spremljene.",e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.errorAlert="",this.errorAlert=e.t0.response.data.error;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.dialog=!1}},watch:{dialog:function(e){e||this.close()}}}),he=fe,ye=(i("5ee4"),Object(u["a"])(he,me,be,!1,null,"fae8641a",null)),xe=ye.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-container",{staticClass:"mt-8",attrs:{"fill-height":"",fluid:""}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[i("v-form",{staticClass:"form",attrs:{onSubmit:"return false;"},on:{submit:e.login}},[i("h1",[e._v("Prijava")]),i("v-text-field",{attrs:{label:"Korisničko ime",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),i("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",label:"Lozinka",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),i("v-btn",{staticClass:"mt-5 mb-5",attrs:{type:"submit"}},[e._v("Prijava")])],1),i("v-alert",{staticClass:"mt-5",attrs:{dense:"",outlined:"",type:"error",value:!!e.error}},[i("div",{domProps:{innerHTML:e._s(e.error)}})])],1)],1)],1)],1)},ke=[],_e={register:function(e){return R().post("user/signup",e)},login:function(e){return R().post("user/login",e)}},we={data:function(){return{error:"",showPassword:!1,username:"",password:""}},methods:{login:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.login({username:this.username,password:this.password});case 3:t=e.sent,this.$store.dispatch("setToken",t.data.token),this.$store.dispatch("setUser",t.data.user),this.$router.push({name:"home"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.error=e.t0.response.data.error;case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}},je=we,Pe=Object(u["a"])(je,ge,ke,!1,null,null,null),$e=Pe.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-container",{staticClass:"mt-8",attrs:{"fill-height":"",fluid:""}},[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[i("v-form",{staticClass:"form",attrs:{onSubmit:"return false;"},on:{submit:e.signUp},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("h1",[e._v("Registracija")]),i("v-text-field",{attrs:{rules:e.nameRules,counter:30,label:"Korisničko ime",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),i("v-text-field",{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",rules:[].concat(e.passwordRules),hint:"Najmanje 8 znakova",counter:32,label:"Lozinka",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),i("v-text-field",{attrs:{"append-icon":e.showPasswordConfirm?"mdi-eye":"mdi-eye-off",type:e.showPasswordConfirm?"text":"password",rules:e.passwordRules.concat([e.passwordConfirmationRule]),hint:"Najmanje 8 znakova",counter:32,label:"Potvrda lozinke",required:""},on:{"click:append":function(t){e.showPasswordConfirm=!e.showPasswordConfirm}},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:"passwordConfirm"}}),i("v-btn",{staticClass:"mt-5 mb-5",attrs:{disabled:!e.valid,type:"submit"}},[e._v("Registracija")])],1),i("v-alert",{staticClass:"mt-5",attrs:{dense:"",outlined:"",type:"error",value:!!e.error}},[i("div",{domProps:{innerHTML:e._s(e.error)}})])],1)],1)],1)],1)},Oe=[],Se={data:function(){return{error:"",valid:!0,showPassword:!1,showPasswordConfirm:!1,username:"",password:"",passwordConfirm:"",nameRules:[function(e){return!!e||"Unesite korisničko ime"},function(e){return e&&e.length>=3&&e.length<=30||"Ime mora biti između 3 i 30 znakova."}],passwordRules:[function(e){return!!e||"Unesite lozinku"},function(e){return e&&e.length>=8&&e.length<=32||"Lozinka mora biti između 8 i 32 znaka."}]}},methods:{signUp:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.register({username:this.username,password:this.password});case 3:t=e.sent,this.$store.dispatch("setToken",t.data.token),this.$store.dispatch("setUser",t.data.user),this.$router.push({name:"home"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.error=e.t0.response.data.error;case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()},computed:{passwordConfirmationRule:function(){return this.password===this.passwordConfirm||"Lozinke se moraju podudarati."}}},Re=Se,Ae=Object(u["a"])(Re,Ce,Oe,!1,null,null,null),Be=Ae.exports;r["default"].use(h["a"]);var Ue=[{path:"/unos-racuna",name:"enter-bill",component:ve,beforeEnter:function(e,t,i){S.getters.isUserLoggedIn?i():i("/prijava")}},{path:"/moji-racuni",name:"user-bills",component:xe,beforeEnter:function(e,t,i){S.getters.isUserLoggedIn?i():i("/prijava")}},{path:"/prijava",name:"login-form",component:$e},{path:"/registracija",name:"register-form",component:Be},{path:"*",name:"home",redirect:"/unos-racuna"}],Ee=new h["a"]({scrollBehavior:function(){return{x:0,y:0}},mode:"history",base:"/",routes:Ue}),Te=Ee,Ne=i("ce5b"),Ie=i.n(Ne),Fe=(i("bf40"),i("9e9d")),qe=i.n(Fe);r["default"].use(Ie.a);var Le=new Ie.a({lang:{locales:{hr:qe.a},current:"hr"}});r["default"].config.productionTip=!1,new r["default"]({router:Te,store:S,vuetify:Le,render:function(e){return e(f)}}).$mount("#app")},"5ee4":function(e,t,i){"use strict";var r=i("6100"),n=i.n(r);n.a},6100:function(e,t,i){},"85ec":function(e,t,i){},"9de9":function(e,t,i){"use strict";var r=i("2d0a"),n=i.n(r);n.a},b453:function(e,t,i){},bf2a:function(e,t,i){"use strict";var r=i("09a1"),n=i.n(r);n.a},dd70:function(e,t,i){"use strict";var r=i("b453"),n=i.n(r);n.a},e141:function(e,t){e.exports=Dynamsoft}});
//# sourceMappingURL=app.f5fcae88.js.map